# YRadio — Карта точек показа рекламы

Лендинг и интерактивная карта для отображения точек размещения аудиорекламы в магазинах. Использует Яндекс Карты API 3.0.

**Демо:** https://klimsergeev.github.io/yradio-map/

## Технологии

- **Frontend**: HTML5, CSS3, Vanilla JavaScript (ES6 модули)
- **Карты**: Яндекс Карты API 3.0
- **Шрифт**: Rubik (Google Fonts)
- **Иконки**: Google Material Symbols
- **Скрипты обработки данных**: Python 3 (pandas, requests)

## Возможности

- Лендинг с презентацией сервиса и статистикой
- Интерактивная карта с 2300+ точками
- Фильтрация по региону и бренду с двусторонней зависимостью
- Поиск по городам внутри регионов
- Автоматический zoom к выбранному региону
- Сохранение состояния фильтров в URL
- Кэширование данных в localStorage
- Адаптивный дизайн (мобильная версия)
- Popup с информацией о точке (цена, контакты, часы работы)

## Структура проекта

```
.
├── app/                          # Веб-приложение
│   ├── index.html                # Лендинг
│   ├── map.html                  # Страница карты
│   ├── css/
│   │   └── style.css             # Стили (лендинг + карта)
│   ├── js/
│   │   ├── app.js                # Главный модуль
│   │   ├── map.js                # Работа с Яндекс Картами
│   │   ├── filters.js            # Логика фильтров
│   │   ├── url-state.js          # Синхронизация с URL
│   │   └── cache.js              # Кэширование данных
│   ├── data/
│   │   ├── map_prices.csv        # Исходные данные (редактируемый)
│   │   ├── points.json           # Сгенерированный JSON для приложения
│   │   └── mappings/
│   │       ├── region-mapping.json   # Нормализация регионов
│   │       └── brand-mapping.json    # Группировка брендов
│   └── assets/
│       ├── yradio-logo.svg           # Логотип YRadio
│       ├── freematiq-logo.svg        # Логотип Freematiq
│       ├── desktop-left-image.png    # Декоративное изображение (десктоп)
│       ├── desktop-right-image.png   # Декоративное изображение (десктоп)
│       ├── mobile-top-image.png      # Декоративное изображение (мобильный)
│       └── mobile-bottom-image.png   # Декоративное изображение (мобильный)
├── scripts/                      # Python-скрипты
│   ├── build_json.py             # Генерация points.json из CSV
│   └── geocode.py                # Геокодирование адресов
└── README.md
```

## Запуск локально

### Требования

- Современный браузер (Chrome, Firefox, Safari, Edge)
- Локальный веб-сервер (необходим для ES6 модулей)
- Python 3.8+ (для скриптов обработки данных)

### Установка

1. Клонируйте репозиторий:
```bash
git clone git@github.com:klimsergeev/yradio-map.git
cd yradio-map
```

2. Установите зависимости Python (для работы со скриптами):
```bash
pip install pandas requests
```

3. Запустите локальный сервер из папки `app`:
```bash
cd app
python -m http.server 8080
```

4. Откройте в браузере: http://localhost:8080

## Работа с данными

### Исходные данные

Основной файл данных — `app/data/map_prices.csv`. Это CSV-файл с точками рекламы.

**Структура CSV:**

| Колонка | Описание |
|---------|----------|
| Регион | Название региона/города |
| Адрес | Адрес точки |
| Название | Название бренда/сети |
| Цена | Цена размещения (руб/мес) |
| Контактов / мес | Количество контактов в месяц |
| Интенсивность выхода | Частота показа (каждые N минут) |
| Часы работы | Время работы точки |
| Выходов / мес | Количество показов в месяц |
| lat | Широта |
| lon | Долгота |

### Маппинги

- `region-mapping.json` — нормализация регионов (объединение вариантов написания)
- `brand-mapping.json` — группировка брендов

### Генерация JSON

После редактирования CSV-файла необходимо сгенерировать `points.json`:

```bash
python scripts/build_json.py
```

### Геокодирование

Если в CSV добавлены новые адреса без координат:

```bash
python scripts/geocode.py
```

**Важно:** После геокодирования нужно запустить `build_json.py` для обновления JSON.

## Яндекс API

Проект использует Яндекс Карты API 3.0. API-ключ указан в `app/map.html`.

Для работы ключа необходимо добавить разрешённые домены в [Кабинете разработчика Яндекс](https://developer.tech.yandex.ru/):
- `localhost` — для локальной разработки
- `klimsergeev.github.io` — для GitHub Pages

## GitHub Pages

Проект размещён на GitHub Pages: https://klimsergeev.github.io/yradio-map/
